(this.webpackJsonpplaylistgenerator=this.webpackJsonpplaylistgenerator||[]).push([[0],[,,,,,,,,,,function(e,t,a){},,,,,,function(e,t,a){},function(e,t,a){e.exports=a.p+"static/media/cross.cad70081.svg"},function(e,t,a){e.exports=a.p+"static/media/arrowleft.6468634d.svg"},,,,,,,function(e,t,a){e.exports=a(47)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),i=a.n(c),s=(a(10),a(3)),l=a.n(s),u=a(6),o=a(2),m=(a(31),a(17)),d=a.n(m),p=(a(32),a(16),a(18)),f=a.n(p),h=a(19),E=a.n(h),v=function(e){var t=e.onQueryChanged,a=r.a.useState(""),n=Object(o.a)(a,2),c=n[0],i=n[1],s=E()("cancel-search-button",{hidden:0===c.length});return r.a.createElement("div",{className:"searchbar"},r.a.createElement("input",{className:"searchbar-input",type:"text",placeholder:"Search for Songs",maxLength:80,value:c,onChange:function(e){t(e.target.value),i(e.target.value)}}),r.a.createElement("div",{className:"searchbar-icons"},r.a.createElement("button",{className:s,onClick:function(){t(""),i("")}},r.a.createElement("img",{src:f.a,alt:"Magnifying glass"}))))},g=a(4),k=a.n(g),y=(a(33),function(e){var t,a=e.track,n=e.icon,c=a.album.images.reduce((function(e,t){return t.width<e.width?t:e}));return r.a.createElement("li",{className:"track-item"},r.a.createElement("div",{className:"track-description"},r.a.createElement("div",{className:"track-cover"},r.a.createElement("img",{width:48,src:c.url,alt:"Cover of album "+a.album.name})),r.a.createElement("div",{className:"track-info"},r.a.createElement("h4",{className:"track-name"},a.name),r.a.createElement("p",{className:"track-album"},(t=a.artists).splice(1).reduce((function(e,t){return e+", "+t.name}),t[0].name)," \u2022 ",a.album.name))),r.a.createElement("div",{className:"track-icon"},n))}),b=(a(34),function(e){var t=e.id,a=e.checked,n=e.onCheckedChanged;return r.a.createElement("input",{className:"round-checkbox",type:"checkbox",id:t,checked:a,onChange:function(e){return n(e.target.checked)}})});var T=a(1),N=new k.a,w=Object(T.b)((function(e){return{seedTracks:e.seedTracks,authentication:e.authentication}}),{selectTrack:function(e){return{type:"SELECT_TRACK",payload:e}},deselectTrack:function(e){return{type:"DESELECT_TRACK",id:e}}})((function(e){var t=e.selectTrack,a=e.deselectTrack,n=e.seedTracks,c=e.authentication,i=r.a.useState([]),s=Object(o.a)(i,2),m=s[0],p=s[1];N.setAccessToken(c.accessToken);var f=function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length&&5!==n.length){e.next=3;break}return p([]),e.abrupt("return");case 3:return e.next=5,N.searchTracks(t);case 5:a=e.sent,p(a.tracks.items);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(e,n){n?t(e):a(e.id)},E=0===m.length||5===n.length?"hide":"show";return r.a.createElement("div",null,r.a.createElement("div",{className:"seed-selector"},r.a.createElement("h2",{className:"section-title"},"Step 2: Select seed songs"),r.a.createElement("div",{className:"searchbar-wrapper"},r.a.createElement(v,{onQueryChanged:f})),r.a.createElement("div",{className:"search-results"},r.a.createElement("div",{className:"search-results-dropdown "+E},m.slice(0,5).map((function(e){return r.a.createElement(y,{track:e,key:e.id,icon:r.a.createElement(b,{id:e.id,checked:n.some((function(t){return t.id===e.id})),onCheckedChanged:function(t){return h(e,t)}})})})))),r.a.createElement("div",{className:"seed-tracks"},n.map((function(e){return r.a.createElement(y,{track:e,key:e.id,icon:r.a.createElement("button",{className:"seed-tracks-deselect",onClick:function(){return h(e,!1)}},r.a.createElement("img",{src:d.a,alt:"cross icon"}))})})))))})),C=(a(40),a(41),a(42),function(e,t,a,n){return{width:e,height:t,position:"relative",bottom:(t+a)/2,left:n}}),S=function(e){var t=e.width,a=e.height,n=e.railHeight,c=e.offsetX;return r.a.createElement("div",{className:"marker",style:C(t,a,n,c)})},x=a(21),_=function(e){var t=e.id,a=e.min,c=e.max,i=e.step,s=e.value,l=e.markValues,u=e.onChange,m=r.a.useState({width:0,height:0}),d=Object(o.a)(m,2),p=d[0],f=d[1],h=Object(n.useRef)(null),E=null,v=function(){h.current&&f({width:h.current.clientWidth,height:h.current.clientHeight})};Object(n.useLayoutEffect)(v,[]),window.addEventListener("resize",(function(){E&&clearInterval(E),E=Object(x.setTimeout)(v,100)}));return r.a.createElement("div",{className:"slider"},r.a.createElement("input",{id:t,value:s,ref:h,className:"slider-input",type:"range",min:a,max:c,onChange:function(e){return u(e.target.value)},step:i}),r.a.createElement("div",{className:"slider-tick-wrapper"},function(){if(null===p)return[];var e=p.width/(l.length-1);return l.map((function(t,n){var i=(t-a)/(c-a),s=e*n,l=6+i*p.width-12*i;return r.a.createElement(S,{key:n,width:e,height:14,railHeight:p.height,offsetX:l-s})}))}()))};var A=Object(T.b)((function(e){return{parameters:e.parameters}}),{updateParameters:function(e){return{type:"UPDATE_PARAMETERS",payload:e}}})((function(e){var t=e.parameters,a=e.updateParameters,n=function(e,n){var r={tempoVariance:10,danceability:.5,energy:.5,popularity:.5,valence:.5};Object.assign(r,t),r[e]=n,a(r)};return r.a.createElement("div",{className:"parameter-section"},r.a.createElement("h2",{className:"section-title"},"Step 3: Adjust parameters"),r.a.createElement("div",{className:"parameters-surface"},r.a.createElement("div",{className:"parameters-wrapper"},r.a.createElement("div",{className:"parameter"},r.a.createElement("h4",null,"Tempo variance"),r.a.createElement(_,{id:"1",min:2,max:10,step:2,value:t.tempoVariance,markValues:[2,4,6,8,10],onChange:function(e){return n("tempoVariance",parseInt(e))}})),r.a.createElement("div",{className:"parameter"},r.a.createElement("h4",null,"Danceability"),r.a.createElement(_,{id:"1",min:0,max:1,step:.1,value:t.danceability,markValues:[0,.2,.4,.6,.8,1],onChange:function(e){return n("danceability",parseFloat(e))}})),r.a.createElement("div",{className:"parameter"},r.a.createElement("h4",null,"Energy"),r.a.createElement(_,{id:"1",min:0,max:1,step:.1,value:t.energy,markValues:[0,.2,.4,.6,.8,1],onChange:function(e){return n("energy",parseFloat(e))}})),r.a.createElement("div",{className:"parameter"},r.a.createElement("h4",null,"Popularity"),r.a.createElement(_,{id:"1",min:0,max:100,step:10,value:t.popularity,markValues:[0,20,40,60,80,100],onChange:function(e){return n("popularity",parseInt(e))}})),r.a.createElement("div",{className:"parameter"},r.a.createElement("h4",null,"Valence"),r.a.createElement(_,{id:"1",min:0,max:1,step:.1,value:t.valence,markValues:[0,.2,.4,.6,.8,1],onChange:function(e){return n("valence",parseFloat(e))}})))))})),O=(a(45),function(){var e=Object(u.a)(l.a.mark((function e(t,a,n){var r,c,i,s,u,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,5e3)}));case 2:return(r=new k.a).setAccessToken(n),e.next=6,r.getAudioFeaturesForTracks(t.map((function(e){return e.id})));case 6:if((c=e.sent).audio_features.length===t.length){e.next=9;break}throw new Error("Unable to fetch audio features");case 9:return i=c.audio_features.reduce((function(e,t){return e+t.tempo}),0)/c.audio_features.length,s={seed_tracks:t.map((function(e){return e.id})),min_tempo:i-a.tempoVariance,max_tempo:i+a.tempoVariance,target_tempo:i,target_danceability:a.danceability,target_energy:a.energy,target_popularity:a.popularity,target_valence:a.valence},e.next=13,r.getRecommendations(s);case 13:if(0!==(u=e.sent).tracks.length){e.next=16;break}return e.abrupt("return",[]);case 16:return e.next=18,r.getTracks(u.tracks.map((function(e){return e.id})));case 18:return o=e.sent,e.abrupt("return",o.tracks);case 20:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()),j=function(){var e=Object(u.a)(l.a.mark((function e(t,a,n){var r,c,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new k.a).setAccessToken(n),e.next=4,r.getMe();case 4:return c=e.sent,e.next=7,r.createPlaylist(c.id,{description:"Created with SpotifyPlaylistGenerator",name:t});case 7:return i=e.sent,e.next=10,r.addTracksToPlaylist(i.id,a.map((function(e){return e.uri})));case 10:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),I=function(){return r.a.createElement("div",{className:"spinner"},r.a.createElement("div",{className:"rect1"}),r.a.createElement("div",{className:"rect2"}),r.a.createElement("div",{className:"rect3"}),r.a.createElement("div",{className:"rect4"}),r.a.createElement("div",{className:"rect5"}))},R=Object(T.b)((function(e){return{seedTracks:e.seedTracks,parameters:e.parameters,authentication:e.authentication}}),{})((function(e){var t=e.seedTracks,a=e.parameters,n=e.authentication,c=r.a.useState({tracks:[],parameters:null}),i=Object(o.a)(c,2),s=i[0],l=i[1],u=r.a.useState(!1),m=Object(o.a)(u,2),d=m[0],p=m[1],f=s.parameters!==a&&t.length>=3,h=s.tracks.length>0;return r.a.createElement("div",{className:"playlist"},r.a.createElement("h2",{className:"section-title"},"Step 4: Generate your playlist"),r.a.createElement("div",{className:"playlist-controls"},r.a.createElement("button",{className:"spotify-button playlist-button",disabled:!f,onClick:function(){p(!0),O(t,a,n.accessToken).then((function(e){l({tracks:e,parameters:a}),p(!1)})).catch((function(){l({tracks:[],parameters:null}),p(!1)}))}},"Generate"),r.a.createElement("button",{className:"spotify-button playlist-button",disabled:!h,onClick:function(){var e=window.prompt("Enter the name of the playlist");null!=e&&j(e,s.tracks,n.accessToken).then((function(){alert("Successfully created the playlist")})).catch((function(){alert("Unable to create the playlist")}))}},"Add playlist")),r.a.createElement("div",{className:"playlist-tracks"},d?r.a.createElement(I,null):s.tracks.map((function(e){return r.a.createElement(y,{track:e,key:e.id})}))))})),P=(a(46),function(e,t){return function(a){a({type:"AUTHENTICATION_SUCCESS",accessToken:e}),setTimeout((function(){a({type:"RESET_AUTHENTICATION"})}),1e3*t)}});var U=Object(T.b)((function(e){return{authentication:e.authentication}}),(function(e){return{authenticationSuccess:function(t,a){return e(P(t,a))}}}))((function(e){var t=e.clientId,a=e.scopes,c=e.redirectUri,i=e.authentication,s=e.authenticationSuccess;Object(n.useEffect)((function(){var e=window.location.href,t=e.indexOf("#");if(-1!==t){var a=function(e){return e.split("&").reduce((function(e,t){var a=t.split("=");return 2!==a.length||(e[a[0]]=a[1]),e}),{})}(e.substring(t+1));"access_token"in a&&"expires_in"in a&&(window.history.replaceState(null,"Playlist Generator",e.substring(0,t)),s(a.access_token,parseInt(a.expires_in)))}}),[]);var l=i.isAuthenticated?"hide":"show";return r.a.createElement("div",{className:"spotify-login "+l},r.a.createElement("div",{className:"spotify-login-title"},r.a.createElement("h1",null,"Playlist Generator for Spotify"),r.a.createElement("div",{className:"spotify-login-content"},r.a.createElement("h2",null,"Step 1: Login to spotify"),r.a.createElement("button",{className:"spotify-login-button spotify-button",onClick:function(){var e={client_id:t,response_type:"token",scope:a.join(" "),redirect_uri:c};window.location.href="https://accounts.spotify.com/authorize?"+function(e){var t=Object.entries(e);return t.reduce((function(e,a,n){return e+="".concat(a[0],"=").concat(encodeURI(a[1])),n<t.length-1&&(e+="&"),e}),"")}(e)}},"Sign in with Spotify"))))})),V=["playlist-modify-public"],L=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(U,{clientId:"9725f36404fa4862966e006f02481944",scopes:V,redirectUri:"https://tim-vu.github.io/PlaylistGenerator/"}),r.a.createElement("div",{className:"page"},r.a.createElement("div",{className:"configuration"},r.a.createElement(w,null),r.a.createElement(A,null)),r.a.createElement(R,null)))},H=a(5),D=a(24),F=[];var G=a(22),K=a(23),M={danceability:10,energy:.5,popularity:50,tempoVariance:.5,valence:.5};var z={isAuthenticated:!1,accessToken:""};var J=Object(H.combineReducers)({seedTracks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_TRACK":return[].concat(Object(D.a)(e),[t.payload]);case"DESELECT_TRACK":return e.filter((function(e){return e.id!==t.id}));case"RESET_TRACK_SELECTION":return[];default:return e}},parameters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_PARAMETERS":return t.payload;default:return e}},authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RESET_AUTHENTICATION":return{isAuthenticated:!1,accessToken:""};case"AUTHENTICATION_SUCCESS":return{isAuthenticated:!0,accessToken:t.accessToken};default:return e}}});var Q=function(){var e=[G.a],t=H.applyMiddleware.apply(void 0,e);return Object(H.createStore)(J,Object(K.composeWithDevTools)(t))}();i.a.render(r.a.createElement(T.a,{store:Q},r.a.createElement(L,null)),document.getElementById("root"))}],[[25,1,2]]]);
//# sourceMappingURL=main.4a5260ad.chunk.js.map